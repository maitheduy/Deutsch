<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>B·∫£n ƒê·ªì Ng·ªØ Ph√°p Ti·∫øng ƒê·ª©c ‚Äì B·∫£ng √î Ch·ªØ M·∫°o T·ª´ & C√°ch</title>
  <style>
    :root {
      --primary: #4fc3f7;
      --success: #4caf50;
      --warning: #ff9800;
      --error: #f44336;
      --light: #f9f9f9;
      --dark: #333;
      --shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    body {
      font-family: 'Segoe UI', 'Comic Sans MS', cursive, sans-serif;
      background: linear-gradient(135deg, #e0f7fa, #bbdefb);
      margin: 0;
      padding: 20px;
      color: var(--dark);
      line-height: 1.6;
    }

    .container {
      max-width: 950px;
      margin: 20px auto;
      background: white;
      border-radius: 24px;
      padding: 40px;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }

    h1 {
      text-align: center;
      color: #e91e63;
      font-size: 3.2rem;
      margin-bottom: 25px;
      text-shadow: 2px 2px 6px rgba(0,0,0,0.1);
      font-weight: 600;
      letter-spacing: -0.5px;
    }

    h2, h3 {
      color: var(--success);
      border-bottom: 3px solid #e0e0e0;
      padding-bottom: 12px;
      margin-top: 35px;
      font-weight: 600;
    }

    .section {
      background: var(--light);
      border-radius: 18px;
      padding: 30px;
      margin: 30px 0;
      border-left: 6px solid var(--primary);
      box-shadow: 0 4px 15px rgba(0,0,0,0.05);
      transition: transform 0.3s ease;
    }

    .section:hover {
      transform: translateY(-5px);
    }

    .key-word {
      font-weight: bold;
      color: #d81b60;
      font-size: 1.3rem;
      padding: 6px 14px;
      background: #ffebee;
      border-radius: 12px;
      border: 1px solid #ffcdd2;
      display: inline-block;
      margin: 0 3px;
    }

    .example {
      background: #e8f5e9;
      padding: 18px;
      border-radius: 14px;
      margin: 18px 0;
      border-left: 4px solid var(--success);
      font-size: 1.25rem;
      border-radius: 14px;
      position: relative;
    }

    .example p {
      margin: 10px 0;
      line-height: 1.7;
    }

    .tip-box {
      background: #fff3e0;
      border: 2px dashed #ff9800;
      padding: 18px;
      border-radius: 14px;
      margin: 25px 0;
      font-style: italic;
      color: #e65100;
      font-weight: 600;
      font-size: 1.1rem;
      box-shadow: 0 2px 8px rgba(255,152,0,0.1);
    }

    /* B·∫¢NG √î CH·ªÆ 4x4 ‚Äî ƒê·ªàNH CAO */
    .grid-container {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin: 35px auto;
      max-width: 620px;
      justify-content: center;
      perspective: 1000px;
    }

    .grid-cell {
      width: 85px;
      height: 85px;
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      color: #757575;
      font-size: 0.85rem;
      cursor: pointer;
      user-select: none;
      transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      box-shadow: 0 3px 8px rgba(0,0,0,0.06);
      position: relative;
      overflow: hidden;
    }

    .grid-cell:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    }

    .grid-cell.correct {
      background: #c8e6c9 !important;
      border-color: var(--success) !important;
      color: #2e7d32 !important;
      animation: pulse-success 0.8s ease-out;
    }

    .grid-cell.wrong {
      background: #ffcdd2 !important;
      border-color: var(--error) !important;
      color: #c62828 !important;
      animation: pulse-error 0.6s ease-out;
    }

    .grid-cell::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at center, rgba(79, 195, 247, 0.1) 0%, transparent 70%);
      opacity: 0;
      transition: opacity 0.3s;
      border-radius: inherit;
    }

    .grid-cell:hover::before {
      opacity: 1;
    }

    .grid-label {
      font-size: 0.75rem;
      font-weight: 600;
      color: #555;
      text-align: center;
      line-height: 1.3;
      margin: 0;
      padding: 0 2px;
    }

    .grid-header {
      text-align: center;
      font-weight: 700;
      color: var(--primary);
      font-size: 1.2rem;
      margin-bottom: 15px;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      font-family: 'Segoe UI', sans-serif;
    }

    /* V√πng k√©o th·∫£ m·∫°o t·ª´ */
    .word-bank {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      margin: 30px 0;
      padding: 20px;
      background: #f0f8ff;
      border-radius: 16px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.05);
    }

    .drag-item {
      padding: 12px 18px;
      background: var(--primary);
      color: white;
      border-radius: 14px;
      font-weight: 700;
      cursor: grab;
      user-select: none;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      font-size: 1.1rem;
      min-width: 70px;
      text-align: center;
      transition: all 0.25s ease;
      border: 1px solid rgba(255,255,255,0.3);
    }

    .drag-item:active {
      cursor: grabbing;
      transform: scale(1.08) translateY(-2px);
      box-shadow: 0 6px 14px rgba(0,0,0,0.15);
    }

    .drag-item:hover {
      background: #42a5f5;
    }

    .feedback {
      font-size: 1.6rem;
      margin: 25px 0;
      font-weight: 700;
      min-height: 70px;
      color: #d81b60;
      text-align: center;
      transition: all 0.4s ease;
      font-family: 'Segoe UI', sans-serif;
    }

    .audio-btn,
    .reset-btn {
      background: #ff9800;
      color: white;
      border: none;
      padding: 14px 28px;
      border-radius: 50px;
      font-size: 1.2rem;
      cursor: pointer;
      margin: 15px 0;
      box-shadow: 0 5px 15px rgba(0,0,0,0.15);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'Segoe UI', sans-serif;
      font-weight: 600;
      letter-spacing: 0.5px;
      display: inline-block;
    }

    .audio-btn:hover {
      background: #fb8c00;
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(255,152,0,0.3);
    }

    .reset-btn {
      background: #673ab7;
      margin-left: 15px;
    }

    .reset-btn:hover {
      background: #5e35b1;
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(103, 58, 183, 0.3);
    }

    .emoji {
      font-size: 2.8rem;
      text-align: center;
      margin: 25px 0;
      opacity: 0.9;
    }

    .footer {
      text-align: center;
      font-size: 0.95rem;
      color: #777;
      margin-top: 45px;
      padding-top: 25px;
      border-top: 1px solid #eee;
    }

    /* Hi·ªáu ·ª©ng m∆∞·ª£t */
    @keyframes pulse-success {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    @keyframes pulse-error {
      0% { transform: scale(1); }
      50% { transform: scale(1.03); }
      100% { transform: scale(1); }
    }

    /* Hi·ªáu ·ª©ng ho√†n t√°c */
    .grid-cell.animating {
      opacity: 0.7;
      transform: scale(0.9);
    }

    @media (max-width: 600px) {
      h1 { font-size: 2.4rem; }
      .grid-cell { width: 70px; height: 70px; font-size: 0.75rem; }
      .drag-item { padding: 10px 14px; font-size: 1rem; }
      .grid-container { gap: 8px; }
      .audio-btn, .reset-btn { padding: 12px 22px; font-size: 1.1rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üó∫Ô∏è B·∫£n ƒê·ªì Ng·ªØ Ph√°p Ti·∫øng ƒê·ª©c ‚Äì B·∫£ng √î Ch·ªØ M·∫°o T·ª´ & C√°ch</h1>

    <div class="emoji">üìñüéØ</div>
    <p style="text-align: center; font-size: 1.35rem; color: #555;">H·ªçc c√°ch v√† m·∫°o t·ª´ b·∫±ng tr√≤ ch∆°i ‚Äúb·∫£ng √¥ ch·ªØ‚Äù ‚Äî kh√¥ng c·∫ßn h·ªçc thu·ªôc, ch·ªâ c·∫ßn hi·ªÉu v√† ch∆°i!</p>

    <!-- Gi·∫£i th√≠ch k·ªπ 4 c√°ch -->
    <div class="section">
      <h2>üß† GI·∫¢I TH√çCH S√ÇU 4 C√ÅCH NG·ªÆ PH√ÅP ‚Äî NH∆Ø M·ªòT C√ÇU CHUY·ªÜN</h2>

      <div class="example">
        <h3>1. Ch·ªß C√°ch (Nominativ) ‚Äî ‚ÄúAi l√† ng∆∞·ªùi l√†m vi·ªác?‚Äù</h3>
        <p><strong>·∫®n d·ª•:</strong> B·∫°n l√† ng∆∞·ªùi c·∫ßm micro ƒë·ª©ng tr√™n s√¢n kh·∫•u ‚Äî b·∫°n l√† <strong>ng∆∞·ªùi ch·ªß ƒë·ªông</strong>.</p>
        <p><strong>C√¢u h·ªèi:</strong> Wer? (Ai?) ‚Äî <em>‚ÄúWer ist das?‚Äù</em> (Ai v·∫≠y?)</p>
        <p><strong>V√≠ d·ª•:</strong></p>
        <p><code><span class="key-word">Der</span> Junge</code> spielt Fu√üball. ‚Üí <em>‚ÄúC·∫≠u b√©‚Äù l√† ng∆∞·ªùi ch∆°i b√≥ng.</em></p>
        <p><code><span class="key-word">Die</span> Frau</code> liest ein Buch. ‚Üí <em>‚ÄúNg∆∞·ªùi ph·ª• n·ªØ‚Äù l√† ng∆∞·ªùi ƒë·ªçc s√°ch.</em></p>
        <p>üëâ Lu√¥n l√† <strong>ch·ªß ng·ªØ</strong> ‚Äî kh√¥ng bao gi·ªù b·ªã thay ƒë·ªïi b·ªüi ƒë·ªông t·ª´!</p>
      </div>

      <div class="example">
        <h3>2. ƒê·ªëi C√°ch (Akkusativ) ‚Äî ‚ÄúAi ho·∫∑c c√°i g√¨ b·ªã t√°c ƒë·ªông?‚Äù</h3>
        <p><strong>·∫®n d·ª•:</strong> B·∫°n n√©m qu·∫£ b√≥ng ‚Äî qu·∫£ b√≥ng l√† <strong>ƒë·ªëi t∆∞·ª£ng b·ªã t√°c ƒë·ªông</strong>.</p>
        <p><strong>C√¢u h·ªèi:</strong> Wen? Was? (Ai? C√°i g√¨?) ‚Äî <em>‚ÄúWas siehst du?‚Äù</em> (B·∫°n th·∫•y g√¨?)</p>
        <p><strong>V√≠ d·ª•:</strong></p>
        <p>Ich sehe <code><span class="key-word">den</span> Mann</code>. ‚Üí <em>T√¥i th·∫•y <strong>ng∆∞·ªùi ƒë√†n √¥ng</strong> (ng∆∞·ªùi b·ªã t√¥i nh√¨n).</em></p>
        <p>Sie kauft <code><span class="key-word">die</span> Tasche</code>. ‚Üí <em>C√¥ ·∫•y mua <strong>c√°i t√∫i</strong> (c√°i b·ªã mua).</em></p>
        <p>üëâ Ch·ªâ c√≥ <strong>gi·ªëng ƒë·ª±c</strong> thay ƒë·ªïi: <strong>der ‚Üí den</strong>. C√°c gi·ªëng kh√°c gi·ªØ nguy√™n!</p>
      </div>

      <div class="example">
        <h3>3. T·∫∑ng C√°ch (Dativ) ‚Äî ‚ÄúAi ƒë∆∞·ª£c t·∫∑ng?‚Äù</h3>
        <p><strong>·∫®n d·ª•:</strong> B·∫°n ƒë∆∞a qu√† cho b·∫°n ‚Äî b·∫°n l√† ng∆∞·ªùi cho, b·∫°n l√† ng∆∞·ªùi <strong>nh·∫≠n qu√†</strong>.</p>
        <p><strong>C√¢u h·ªèi:</strong> Wem? (Cho ai?) ‚Äî <em>‚ÄúWem gibst du das Buch?‚Äù</em> (B·∫°n ƒë∆∞a cu·ªën s√°ch cho ai?)</p>
        <p><strong>V√≠ d·ª•:</strong></p>
        <p>Ich gebe <code><span class="key-word">dem</span> Kind</code> einen Apfel. ‚Üí <em>T√¥i ƒë∆∞a <strong>cho ƒë·ª©a tr·∫ª</strong> m·ªôt qu·∫£ t√°o.</em></p>
        <p>Sie hilft <code><span class="key-word">der</span> Lehrerin</code>. ‚Üí <em>C√¥ ·∫•y gi√∫p <strong>cho c√¥ gi√°o</strong>.</em></p>
        <p>üëâ Gi·ªëng ƒë·ª±c & trung: <strong>der ‚Üí dem</strong>, <strong>das ‚Üí dem</strong><br>Gi·ªëng c√°i: <strong>die ‚Üí der</strong> (kh√¥ng ph·∫£i ‚Äúdem‚Äù!)</p>
      </div>

      <div class="example">
        <h3>4. S·ªü H·ªØu C√°ch (Genitiv) ‚Äî ‚ÄúC·ªßa ai?‚Äù</h3>
        <p><strong>·∫®n d·ª•:</strong> B·∫°n nh√¨n v√†o m·ªôt chi·∫øc √°o ‚Äî b·∫°n h·ªèi: ‚ÄúC·ªßa ai th·∫ø?‚Äù</p>
        <p><strong>C√¢u h·ªèi:</strong> Wessen? (C·ªßa ai?) ‚Äî <em>‚ÄúWessen Buch ist das?‚Äù</em> (Cu·ªën s√°ch n√†y l√† c·ªßa ai?)</p>
        <p><strong>V√≠ d·ª•:</strong></p>
        <p>Das ist das Auto <code><span class="key-word">des</span> Vaters</code>. ‚Üí <em>ƒê√≥ l√† chi·∫øc xe <strong>c·ªßa b·ªë</strong>.</em></p>
        <p>Die Farbe <code><span class="key-word">der</span> Blume</code> ist sch√∂n. ‚Üí <em>M√†u s·∫Øc <strong>c·ªßa b√¥ng hoa</strong> ƒë·∫πp.</em></p>
        <p>üëâ Gi·ªëng ƒë·ª±c & trung: <strong>der ‚Üí des</strong>, <strong>das ‚Üí des</strong><br>Gi·ªëng c√°i & s·ªë nhi·ªÅu: <strong>die ‚Üí der</strong></p>
        <p>‚ö†Ô∏è Trong giao ti·∫øp h·∫±ng ng√†y, ng∆∞·ªùi ƒê·ª©c th∆∞·ªùng d√πng <strong>Dativ + von</strong> thay cho Genitiv:</p>
        <p>‚Üí ‚ÄúDas Auto von meinem Vater‚Äù thay v√¨ ‚ÄúDas Auto des Vaters‚Äù</p>
      </div>

      <div class="tip-box">
        üß† M·∫πo nh·ªõ nhanh:  
        <strong>‚ÄúNominativ = Ch·ªß nh√¢n‚Äù</strong> ‚Äî Ng∆∞·ªùi ƒë·ª©ng ƒë·∫ßu<br>
        <strong>‚ÄúAkkusativ = ƒê·ªëi t∆∞·ª£ng‚Äù</strong> ‚Äî Ng∆∞·ªùi b·ªã t√°c ƒë·ªông<br>
        <strong>‚ÄúDativ = Ng∆∞·ªùi nh·∫≠n‚Äù</strong> ‚Äî Ng∆∞·ªùi ƒë∆∞·ª£c t·∫∑ng<br>
        <strong>‚ÄúGenitiv = C·ªßa ai?‚Äù</strong> ‚Äî M·ªëi quan h·ªá s·ªü h·ªØu
      </div>
    </div>

    <!-- B·∫£ng √¥ ch·ªØ 4x4 ‚Äî Tr√≤ ch∆°i ch√≠nh -->
    <div class="section">
      <h2>üéØ TR√í CH∆†I: ƒê·∫∂T M·∫†O T·ª™ V√ÄO √î CH√çNH X√ÅC!</h2>
      <p style="font-size: 1.25rem; color: #555;">M·ªói √¥ vu√¥ng nh·ªè ƒë·∫°i di·ªán cho m·ªôt t·ªï h·ª£p: <strong>C√°ch + Gi·ªõi t√≠nh</strong>. H√£y k√©o m·∫°o t·ª´ ƒë√∫ng v√†o √¥!</p>

      <!-- B·∫£ng ti√™u ƒë·ªÅ -->
      <div class="grid-header">C√ÅCH</div>
      <div class="grid-container" id="grid-container">
        <!-- C·ªôt 1: Nominativ -->
        <div class="grid-cell" data-case="nominativ" data-gender="maskulin">
          <div class="grid-label">Nominativ</div>
          <div class="grid-label">ƒë·ª±c</div>
        </div>
        <div class="grid-cell" data-case="nominativ" data-gender="feminin">
          <div class="grid-label">Nominativ</div>
          <div class="grid-label">c√°i</div>
        </div>
        <div class="grid-cell" data-case="nominativ" data-gender="neutral">
          <div class="grid-label">Nominativ</div>
          <div class="grid-label">trung</div>
        </div>
        <div class="grid-cell" data-case="nominativ" data-gender="plural">
          <div class="grid-label">Nominativ</div>
          <div class="grid-label">nhi·ªÅu</div>
        </div>

        <!-- C·ªôt 2: Akkusativ -->
        <div class="grid-cell" data-case="akkusativ" data-gender="maskulin">
          <div class="grid-label">Akkusativ</div>
          <div class="grid-label">ƒë·ª±c</div>
        </div>
        <div class="grid-cell" data-case="akkusativ" data-gender="feminin">
          <div class="grid-label">Akkusativ</div>
          <div class="grid-label">c√°i</div>
        </div>
        <div class="grid-cell" data-case="akkusativ" data-gender="neutral">
          <div class="grid-label">Akkusativ</div>
          <div class="grid-label">trung</div>
        </div>
        <div class="grid-cell" data-case="akkusativ" data-gender="plural">
          <div class="grid-label">Akkusativ</div>
          <div class="grid-label">nhi·ªÅu</div>
        </div>

        <!-- C·ªôt 3: Dativ -->
        <div class="grid-cell" data-case="dativ" data-gender="maskulin">
          <div class="grid-label">Dativ</div>
          <div class="grid-label">ƒë·ª±c</div>
        </div>
        <div class="grid-cell" data-case="dativ" data-gender="feminin">
          <div class="grid-label">Dativ</div>
          <div class="grid-label">c√°i</div>
        </div>
        <div class="grid-cell" data-case="dativ" data-gender="neutral">
          <div class="grid-label">Dativ</div>
          <div class="grid-label">trung</div>
        </div>
        <div class="grid-cell" data-case="dativ" data-gender="plural">
          <div class="grid-label">Dativ</div>
          <div class="grid-label">nhi·ªÅu</div>
        </div>

        <!-- C·ªôt 4: Genitiv -->
        <div class="grid-cell" data-case="genitiv" data-gender="maskulin">
          <div class="grid-label">Genitiv</div>
          <div class="grid-label">ƒë·ª±c</div>
        </div>
        <div class="grid-cell" data-case="genitiv" data-gender="feminin">
          <div class="grid-label">Genitiv</div>
          <div class="grid-label">c√°i</div>
        </div>
        <div class="grid-cell" data-case="genitiv" data-gender="neutral">
          <div class="grid-label">Genitiv</div>
          <div class="grid-label">trung</div>
        </div>
        <div class="grid-cell" data-case="genitiv" data-gender="plural">
          <div class="grid-label">Genitiv</div>
          <div class="grid-label">nhi·ªÅu</div>
        </div>
      </div>

      <!-- V√πng k√©o th·∫£ m·∫°o t·ª´ -->
      <div class="word-bank" id="word-bank">
        <div class="drag-item" draggable="true">der</div>
        <div class="drag-item" draggable="true">den</div>
        <div class="drag-item" draggable="true">dem</div>
        <div class="drag-item" draggable="true">des</div>
        <div class="drag-item" draggable="true">die</div>
        <div class="drag-item" draggable="true">die</div>
        <div class="drag-item" draggable="true">der</div>
        <div class="drag-item" draggable="true">der</div>
        <div class="drag-item" draggable="true">das</div>
        <div class="drag-item" draggable="true">das</div>
        <div class="drag-item" draggable="true">den</div>
        <div class="drag-item" draggable="true">der</div>
      </div>

      <div class="feedback" id="feedback">H√£y k√©o c√°c m·∫°o t·ª´ v√†o √¥ ƒë√∫ng!</div>
      <div style="text-align: center;">
        <button class="audio-btn" onclick="playAudio('der den dem des die die der der das das den der')">üîä Ph√°t √¢m t·∫•t c·∫£ m·∫°o t·ª´</button>
        <button class="reset-btn" id="reset-btn">üîÑ Ch∆°i l·∫°i</button>
      </div>
    </div>

    <!-- B·∫£ng t·ªïng h·ª£p -->
    <div class="section">
      <h2>‚úÖ B·∫¢NG T·ªîNG H·ª¢P M·ªòT L·∫¶N NH√åN L√Ä NH·ªö</h2>
      <table style="width: 100%; margin: 25px auto; border-collapse: collapse; border-radius: 18px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
        <thead>
          <tr>
            <th style="background: var(--primary); color: white; padding: 18px; text-align: center; font-size: 1.1rem;">C√°ch</th>
            <th style="background: var(--primary); color: white; padding: 18px; text-align: center; font-size: 1.1rem;">Gi·ªëng ƒë·ª±c</th>
            <th style="background: var(--primary); color: white; padding: 18px; text-align: center; font-size: 1.1rem;">Gi·ªëng c√°i</th>
            <th style="background: var(--primary); color: white; padding: 18px; text-align: center; font-size: 1.1rem;">Gi·ªëng trung</th>
            <th style="background: var(--primary); color: white; padding: 18px; text-align: center; font-size: 1.1rem;">S·ªë nhi·ªÅu</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="background: #e3f2fd; padding: 18px; font-weight: 600;"><strong>Nominativ</strong></td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">der</td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">die</td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">das</td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">die</td>
          </tr>
          <tr>
            <td style="background: #e3f2fd; padding: 18px; font-weight: 600;"><strong>Akkusativ</strong></td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">den</td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">die</td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">das</td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">die</td>
          </tr>
          <tr>
            <td style="background: #e3f2fd; padding: 18px; font-weight: 600;"><strong>Dativ</strong></td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">dem</td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">der</td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">dem</td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">den</td>
          </tr>
          <tr>
            <td style="background: #e3f2fd; padding: 18px; font-weight: 600;"><strong>Genitiv</strong></td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">des</td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">der</td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">des</td>
            <td style="background: #e3f2fd; padding: 18px; text-align: center;" class="key-word">der</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="footer">
      üéß H·ªçc ti·∫øng ƒê·ª©c kh√¥ng ph·∫£i h·ªçc thu·ªôc ‚Äî m√† l√† <strong>ch∆°i v√† hi·ªÉu</strong>!<br>
      üë©‚Äçüè´ D√†nh cho h·ªçc sinh c·∫•p 2 tr·ªü l√™n ‚Äî kh√¥ng c·∫ßn bi·∫øt ng·ªØ ph√°p ph·ª©c t·∫°p, ch·ªâ c·∫ßn ch∆°i!
    </div>
  </div>

  <!-- √Çm thanh -->
  <audio id="audio-player" style="display: none;"></audio>

  <script>
    // Ph√°t √¢m c√°c m·∫°o t·ª´
    function playAudio(text) {
      const url = `https://translate.google.com/translate_tts?ie=UTF-8&tl=de&q=${encodeURIComponent(text)}&client=tw-ob`;
      const audio = new Audio(url);
      audio.play().catch(e => {
        alert("Kh√¥ng ph√°t ƒë∆∞·ª£c √¢m thanh. Vui l√≤ng d√πng Chrome v√† b·∫≠t autoplay!");
      });
    }

    // ƒê√°p √°n ƒë√∫ng ‚Äî m·ªói √¥ c√≥ 1 m·∫°o t·ª´ ƒë√∫ng
    const correctAnswers = {
      'nominativ-maskulin': 'der',
      'nominativ-feminin': 'die',
      'nominativ-neutral': 'das',
      'nominativ-plural': 'die',
      'akkusativ-maskulin': 'den',
      'akkusativ-feminin': 'die',
      'akkusativ-neutral': 'das',
      'akkusativ-plural': 'die',
      'dativ-maskulin': 'dem',
      'dativ-feminin': 'der',
      'dativ-neutral': 'dem',
      'dativ-plural': 'den',
      'genitiv-maskulin': 'des',
      'genitiv-feminin': 'der',
      'genitiv-neutral': 'des',
      'genitiv-plural': 'der'
    };

    const gridCells = document.querySelectorAll('.grid-cell');
    const dragItems = document.querySelectorAll('.drag-item');
    const feedback = document.getElementById('feedback');
    const resetBtn = document.getElementById('reset-btn');

    // Khi k√©o
    dragItems.forEach(item => {
      item.addEventListener('dragstart', (e) => {
        e.dataTransfer.setData('text/plain', item.textContent);
        e.dataTransfer.effectAllowed = 'copy';
        item.style.opacity = '0.8';
        item.style.transform = 'scale(1.05)';
      });

      item.addEventListener('dragend', () => {
        item.style.opacity = '1';
        item.style.transform = 'scale(1)';
      });
    });

    // Khi th·∫£ v√†o √¥
    gridCells.forEach(cell => {
      cell.addEventListener('dragover', (e) => {
        e.preventDefault();
        e.dataTransfer.dropEffect = 'copy';
        cell.style.boxShadow = '0 0 15px rgba(79, 195, 247, 0.4)';
      });

      cell.addEventListener('dragleave', () => {
        cell.style.boxShadow = '0 3px 8px rgba(0,0,0,0.06)';
      });

      cell.addEventListener('drop', (e) => {
        e.preventDefault();
        const word = e.dataTransfer.getData('text/plain');
        const caseType = cell.dataset.case;
        const genderType = cell.dataset.gender;
        const key = `${caseType}-${genderType}`;

        // Ki·ªÉm tra ƒë√∫ng/sai
        if (correctAnswers[key] === word) {
          cell.textContent = word;
          cell.classList.add('correct');
          cell.style.color = '#2e7d32';
          cell.style.fontWeight = '700';
          cell.style.cursor = 'default';
          feedback.textContent = '‚úÖ ƒê√∫ng r·ªìi! B·∫°n ƒëang l√†m r·∫•t t·ªët!';
          feedback.style.color = '#2e7d32';
        } else {
          cell.textContent = 'Sai!';
          cell.classList.add('wrong');
          cell.style.color = '#c62828';
          cell.style.fontWeight = '700';
          feedback.textContent = '‚ùå Sai r·ªìi! H√£y th·ª≠ l·∫°i v·ªõi m·∫°o t·ª´ kh√°c.';
          feedback.style.color = '#c62828';
          setTimeout(() => {
            cell.textContent = '';
            cell.classList.remove('wrong');
            cell.style.color = '#757575';
            cell.style.fontWeight = '600';
            cell.innerHTML = `<div class="grid-label">${caseType}</div><div class="grid-label">${genderType}</div>`;
          }, 1200);
        }

        // Ki·ªÉm tra ho√†n th√†nh
        const allCorrect = Array.from(gridCells).every(c => 
          c.classList.contains('correct') || 
          (c.textContent.trim() === '' && !c.classList.contains('wrong'))
        );

        if (allCorrect) {
          feedback.textContent = 'üéâ CH√öC M·ª™NG! B·∫°n ƒë√£ ƒë·∫∑t ƒë√∫ng t·∫•t c·∫£ 12 √¥! üëè';
          feedback.style.color = '#2e7d32';
          feedback.style.transform = 'scale(1.05)';
          setTimeout(() => feedback.style.transform = 'scale(1)', 500);
        }
      });
    });

    // Click ƒë√∫p ƒë·ªÉ ho√†n t√°c
    gridCells.forEach(cell => {
      cell.addEventListener('dblclick', () => {
        if (cell.classList.contains('correct') || cell.classList.contains('wrong')) {
          cell.classList.add('animating');
          setTimeout(() => {
            cell.textContent = '';
            cell.classList.remove('correct', 'wrong', 'animating');
            cell.style.color = '#757575';
            cell.style.fontWeight = '600';
            cell.innerHTML = `<div class="grid-label">${cell.dataset.case}</div><div class="grid-label">${cell.dataset.gender}</div>`;
            feedback.textContent = '‚úÖ √î ƒë√£ ƒë∆∞·ª£c kh√¥i ph·ª•c. Th·ª≠ l·∫°i n√†o!';
            feedback.style.color = '#ff9800';
          }, 150);
        }
      });
    });

    // N√∫t "Ch∆°i l·∫°i" ‚Äî hi·ªáu ·ª©ng m∆∞·ª£t
    resetBtn.addEventListener('click', () => {
      feedback.textContent = '‚ú® ƒêang reset...';
      feedback.style.color = '#ff9800';

      gridCells.forEach(cell => {
        if (cell.classList.contains('correct') || cell.classList.contains('wrong')) {
          cell.classList.add('animating');
          setTimeout(() => {
            cell.textContent = '';
            cell.classList.remove('correct', 'wrong', 'animating');
            cell.style.color = '#757575';
            cell.style.fontWeight = '600';
            cell.innerHTML = `<div class="grid-label">${cell.dataset.case}</div><div class="grid-label">${cell.dataset.gender}</div>`;
          }, 150);
        }
      });

      setTimeout(() => {
        feedback.textContent = 'üîÑ ƒê√£ reset to√†n b·ªô! H√£y b·∫Øt ƒë·∫ßu l·∫°i!';
        feedback.style.color = '#ff9800';
      }, 300);
    });

    // Kh·ªüi t·∫°o b·∫£ng: hi·ªÉn th·ªã l·∫°i ti√™u ƒë·ªÅ n·∫øu √¥ tr·ªëng
    gridCells.forEach(cell => {
      if (!cell.textContent.trim()) {
        cell.innerHTML = `<div class="grid-label">${cell.dataset.case}</div><div class="grid-label">${cell.dataset.gender}</div>`;
      }
    });
  </script>
</body>
</html>
